<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Register</title>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        
</head>
<body>
    <div id="register">
        <input type="text" id="username" placeholder="username">
        <input type="email" id="email" placeholder="email">
        <input type="password" id="password" placeholder="Password">
        <input type="password"  id="confirm" placeholder="Confirm">
        <p id="errTxt"></p>
        <input type="tel"  id="phone" placeholder="Phone" value="+91">
        <input type="text" id="college" placeholder="College Name">
        <button disabled>Register</button>        

    </div>
    <script>
        '{"user":{"username":"Abhinav","email":"abhinav.dayal@vishnu.edu.in","password":"dashrath"},"phone":"+919494321387","college":"VIT","isCoordinator":true,"isFaculty":true}'
        $(document).ready(
            $('#confirm').keyup(function (e) {
                var errText = $("#errTxt"); 
                if($('#password').val() !== $('#confirm').val()){
                    errText.text('Password did not match!!');
                    errText.css({'color':'red'});
                    $('button').prop('disabled',true)
                }else{
                    errText.text('Password  matched!!');
                    errText.css({'color':'green'});
                    $('button').prop('disabled',false)
                }
            }),
            
            $('button').click(function(){
                var username = $('#username').val();
                var pass = $('#password').val();
                var email = $('#email').val();
                var phone = $('#phone').val();
                var college = $('#college').val();

                $.ajax({
                    type:"POST",
                    url : "http://localhost:8000/events/api/userprofile/all",
                    data : '{"user":{"username":"'+username+'","email":"'+email+'","password":"'+pass+'"},"phone":"'+phone+'","college":"'+college+'","isCoordinator":false,"isFaculty":false}',
                    contentType : "application/json",
                    dataType : "json",
                    success : function(response){
                        console.log(response);
                        if(response.hasOwnProperty('id'))
                            alert('successfully registered');
                    },
                    error: function(xht,status,err){
                        alert(error);
                    }
                });
            })
        );
    </script>
</body>
</html>